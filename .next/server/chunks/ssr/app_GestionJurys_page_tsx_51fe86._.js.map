{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file://C%3A/Users/aybb/Desktop/pfe/pfe_final/smart_pfe/app/GestionJurys/page.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { FaEdit, FaPlus, FaTrash } from \"react-icons/fa\";\r\n\r\nconst GestionJurys = () => {\r\n  const [jurys, setJurys] = useState<{ idJury: number; nom: string }[]>([]); // Use correct type for juries\r\n  const [newJuryName, setNewJuryName] = useState(\"\");\r\n\r\n  // Fetch jurors from the database when the component mounts\r\n  useEffect(() => {\r\n    const fetchJurys = async () => {\r\n      try {\r\n        const response = await fetch(\"/api/jurys\"); // Endpoint to fetch jurors\r\n        const data = await response.json();\r\n        setJurys(data); // Set the jurors data\r\n      } catch (error) {\r\n        console.error(\"Error fetching jurors:\", error);\r\n      }\r\n    };\r\n\r\n    fetchJurys();\r\n  }, []); // Run only once when the component mounts\r\n\r\n  // Function to add a new jury member\r\n  const addJury = async () => {\r\n    if (!newJuryName) {\r\n      alert(\"Le nom du jury est vide !\");\r\n      return;\r\n    }\r\n\r\n    // Check if the jury already exists in the current list\r\n    if (jurys.some((jury) => jury.nom === newJuryName)) {\r\n      alert(\"Ce jury existe d√©j√† !\");\r\n      return;\r\n    }\r\n\r\n    try {\r\n      const response = await fetch(\"/api/jurys\", {\r\n        method: \"POST\",\r\n        headers: {\r\n          \"Content-Type\": \"application/json\",\r\n        },\r\n        body: JSON.stringify({ nom: newJuryName }),\r\n      });\r\n\r\n      if (response.ok) {\r\n        const newJury = await response.json();\r\n        setJurys([...jurys, newJury]);\r\n        setNewJuryName(\"\"); // Clear the input field\r\n      } else {\r\n        alert(\"Erreur lors de l'ajout du jury.\");\r\n      }\r\n    } catch (error) {\r\n      console.error(\"Error adding jury:\", error);\r\n    }\r\n  };\r\n\r\n  // Function to edit a jury member\r\n  const editJury = (jury: { idJury: number; nom: string }) => {\r\n    const newMember = prompt(`Remplacer ${jury.nom} par :`, jury.nom);\r\n    if (newMember && !jurys.some((j) => j.nom === newMember)) {\r\n      // Update the jury's name\r\n      const updatedJurys = jurys.map((j) =>\r\n        j.idJury === jury.idJury ? { ...j, nom: newMember } : j\r\n      );\r\n      setJurys(updatedJurys);\r\n    } else if (newMember && jurys.some((j) => j.nom === newMember)) {\r\n      alert(\"Ce jury existe d√©j√† !\");\r\n    }\r\n  };\r\n\r\n  // Function to delete a jury member\r\n  const deleteJury = async (juryId: number) => {\r\n    const confirmDelete = confirm(\"Voulez-vous vraiment supprimer ce jury ?\");\r\n    if (confirmDelete) {\r\n      try {\r\n        const response = await fetch(`/api/jurys/${juryId}`, {\r\n          method: \"DELETE\",\r\n        });\r\n\r\n        if (response.ok) {\r\n          setJurys(jurys.filter((jury) => jury.idJury !== juryId)); // Remove from list\r\n        } else {\r\n          alert(\"Erreur lors de la suppression du jury.\");\r\n        }\r\n      } catch (error) {\r\n        console.error(\"Error deleting jury:\", error);\r\n      }\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"mt-8 max-w-4xl mx-auto\">\r\n      <h2 className=\"text-2xl font-semibold text-gray-700 mb-6\">üë®‚Äç‚öñÔ∏è Gestion des Jurys</h2>\r\n      <div className=\"bg-white p-6 rounded-lg shadow-xl\">\r\n        {/* List of Jurys */}\r\n        <ul className=\"space-y-3\">\r\n          {jurys.map((jury) => (\r\n            <li key={jury.idJury} className=\"flex items-center justify-between p-4 bg-gray-50 rounded-lg shadow-sm\">\r\n              <span className=\"text-gray-700\">{jury.nom}</span>\r\n              <div className=\"flex items-center gap-4\">\r\n                {/* Edit Button */}\r\n                <button\r\n                  onClick={() => editJury(jury)}\r\n                  className=\"text-blue-500 hover:text-blue-700 transition duration-300\"\r\n                >\r\n                  <FaEdit />\r\n                </button>\r\n                {/* Delete Button */}\r\n                <button\r\n                  onClick={() => deleteJury(jury.idJury)}\r\n                  className=\"text-red-500 hover:text-red-700 transition duration-300\"\r\n                >\r\n                  <FaTrash />\r\n                </button>\r\n              </div>\r\n            </li>\r\n          ))}\r\n        </ul>\r\n\r\n        {/* Add Jury Button */}\r\n        <div className=\"mt-4\">\r\n          <input\r\n            type=\"text\"\r\n            value={newJuryName}\r\n            onChange={(e) => setNewJuryName(e.target.value)}\r\n            className=\"p-2 border rounded\"\r\n            placeholder=\"Nom du jury\"\r\n          />\r\n          <button\r\n            onClick={addJury}\r\n            className=\"mt-2 bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition duration-300 w-full\"\r\n          >\r\n            <FaPlus /> Ajouter un Jury\r\n          </button>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default GestionJurys;\r\n"],"names":[],"mappings":";;;;AAEA;AACA;AAHA;;;;AAKA,MAAM,eAAe;IACnB,MAAM,CAAC,OAAO,SAAS,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAqC,EAAE,GAAG,8BAA8B;IACzG,MAAM,CAAC,aAAa,eAAe,GAAG,CAAA,GAAA,qMAAA,CAAA,WAAQ,AAAD,EAAE;IAE/C,2DAA2D;IAC3D,CAAA,GAAA,qMAAA,CAAA,YAAS,AAAD,EAAE;QACR,MAAM,aAAa;YACjB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,eAAe,2BAA2B;gBACvE,MAAM,OAAO,MAAM,SAAS,IAAI;gBAChC,SAAS,OAAO,sBAAsB;YACxC,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,0BAA0B;YAC1C;QACF;QAEA;IACF,GAAG,EAAE,GAAG,0CAA0C;IAElD,oCAAoC;IACpC,MAAM,UAAU;QACd,IAAI,CAAC,aAAa;YAChB,MAAM;YACN;QACF;QAEA,uDAAuD;QACvD,IAAI,MAAM,IAAI,CAAC,CAAC,OAAS,KAAK,GAAG,KAAK,cAAc;YAClD,MAAM;YACN;QACF;QAEA,IAAI;YACF,MAAM,WAAW,MAAM,MAAM,cAAc;gBACzC,QAAQ;gBACR,SAAS;oBACP,gBAAgB;gBAClB;gBACA,MAAM,KAAK,SAAS,CAAC;oBAAE,KAAK;gBAAY;YAC1C;YAEA,IAAI,SAAS,EAAE,EAAE;gBACf,MAAM,UAAU,MAAM,SAAS,IAAI;gBACnC,SAAS;uBAAI;oBAAO;iBAAQ;gBAC5B,eAAe,KAAK,wBAAwB;YAC9C,OAAO;gBACL,MAAM;YACR;QACF,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,sBAAsB;QACtC;IACF;IAEA,iCAAiC;IACjC,MAAM,WAAW,CAAC;QAChB,MAAM,YAAY,OAAO,CAAC,UAAU,EAAE,KAAK,GAAG,CAAC,MAAM,CAAC,EAAE,KAAK,GAAG;QAChE,IAAI,aAAa,CAAC,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,GAAG,KAAK,YAAY;YACxD,yBAAyB;YACzB,MAAM,eAAe,MAAM,GAAG,CAAC,CAAC,IAC9B,EAAE,MAAM,KAAK,KAAK,MAAM,GAAG;oBAAE,GAAG,CAAC;oBAAE,KAAK;gBAAU,IAAI;YAExD,SAAS;QACX,OAAO,IAAI,aAAa,MAAM,IAAI,CAAC,CAAC,IAAM,EAAE,GAAG,KAAK,YAAY;YAC9D,MAAM;QACR;IACF;IAEA,mCAAmC;IACnC,MAAM,aAAa,OAAO;QACxB,MAAM,gBAAgB,QAAQ;QAC9B,IAAI,eAAe;YACjB,IAAI;gBACF,MAAM,WAAW,MAAM,MAAM,CAAC,WAAW,EAAE,QAAQ,EAAE;oBACnD,QAAQ;gBACV;gBAEA,IAAI,SAAS,EAAE,EAAE;oBACf,SAAS,MAAM,MAAM,CAAC,CAAC,OAAS,KAAK,MAAM,KAAK,UAAU,mBAAmB;gBAC/E,OAAO;oBACL,MAAM;gBACR;YACF,EAAE,OAAO,OAAO;gBACd,QAAQ,KAAK,CAAC,wBAAwB;YACxC;QACF;IACF;IAEA,qBACE,8OAAC;QAAI,WAAU;;0BACb,8OAAC;gBAAG,WAAU;0BAA4C;;;;;;0BAC1D,8OAAC;gBAAI,WAAU;;kCAEb,8OAAC;wBAAG,WAAU;kCACX,MAAM,GAAG,CAAC,CAAC,qBACV,8OAAC;gCAAqB,WAAU;;kDAC9B,8OAAC;wCAAK,WAAU;kDAAiB,KAAK,GAAG;;;;;;kDACzC,8OAAC;wCAAI,WAAU;;0DAEb,8OAAC;gDACC,SAAS,IAAM,SAAS;gDACxB,WAAU;0DAEV,cAAA,8OAAC,8IAAA,CAAA,SAAM;;;;;;;;;;0DAGT,8OAAC;gDACC,SAAS,IAAM,WAAW,KAAK,MAAM;gDACrC,WAAU;0DAEV,cAAA,8OAAC,8IAAA,CAAA,UAAO;;;;;;;;;;;;;;;;;+BAfL,KAAK,MAAM;;;;;;;;;;kCAuBxB,8OAAC;wBAAI,WAAU;;0CACb,8OAAC;gCACC,MAAK;gCACL,OAAO;gCACP,UAAU,CAAC,IAAM,eAAe,EAAE,MAAM,CAAC,KAAK;gCAC9C,WAAU;gCACV,aAAY;;;;;;0CAEd,8OAAC;gCACC,SAAS;gCACT,WAAU;;kDAEV,8OAAC,8IAAA,CAAA,SAAM;;;;;oCAAG;;;;;;;;;;;;;;;;;;;;;;;;;AAMtB;uCAEe"}},
    {"offset": {"line": 223, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}}]
}